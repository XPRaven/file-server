<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Bücher</title>

    <link rel="stylesheet" href="./list.css" id="style">
</head>
<body>
<div>
    <button id="back" onclick="history.back()">&#9204;</button>
    <h2>Bücher</h2>
</div>
<table id="table">
    <tr id="thead">
        <th style="width: 30%">Reihe</th>
        <th style="width: 0">#</th>
        <th style="width: 70%">Buch</th>
    </tr>
</table>
</body>
<script>
    async function fetchData() {
        const response = await fetch('./literature/files');
        return await response.json();
    }

    function addTableRow(table, data) {
        let row = table.appendChild(document.createElement('tr'));
        if (data == null) {
            let td = row.appendChild(document.createElement('td'));
            row.id = 'no-entries';
            document.getElementById("no-entries").style.backgroundColor = '#d1d1d1';
            document.getElementById("no-entries").style.cursor = 'auto';
            td.colSpan = 3;
            td.innerText = 'Keine Einträge vorhanden';
            return;
        }
        row.appendChild(document.createElement('td')).innerText = data.series;
        row.appendChild(document.createElement('td')).innerText = data.no;
        row.appendChild(document.createElement('td')).innerText = data.episode;
        row.addEventListener('click', () => {window.location.href = data.path;});
    }

    document.addEventListener('DOMContentLoaded', async () => {
        let filesData = await fetchData();
        const table = document.getElementById('table');
        if (filesData.length > 0) {
            for (let fileData of filesData) {
                addTableRow(table, fileData);
            }
        } else {
            addTableRow(table, null);
        }
    });
</script>
</html>